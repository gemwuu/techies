{"version":3,"sources":["src/util.js","src/dom.js","index.js"],"names":["type","value","Object","prototype","toString","call","match","toLowerCase","removeWhiteSpace","array","dirtyData","filter","item","includes","getNumbers","str","reg","console","info","reportData","page","status","numbers","techies","dom","warn","traverse","newArr","forEach","index","arr","concat","parent","getNodeTextContent","children","l","length","child","node","innerHTML","trim","replace","Array","from","RegExp","map","outerHTML","join","textContent","split","push","document","body"],"mappings":"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","file":"techies.e31bb0bc.map","sourceRoot":"..","sourcesContent":["export function type(value) {\n  return Object.prototype.toString\n    .call(value)\n    .match(/\\[object\\ (.*)\\]/)[1]\n    .toLowerCase();\n}\n\nexport function removeWhiteSpace(array) {\n  const dirtyData = ['', ' '];\n  return array.filter(item => !dirtyData.includes(item));\n}\n\nexport function getNumbers(str) {\n  const reg = /\\d+/g;\n  console.info(str.match(reg));\n  return str.match(reg);\n}\n","'use strict';\n/**\n * @author: tianding.wk\n * @createdTime: 2019-02-11 20:57:18\n * @fileName: dom.js\n * @description: process dom to get all number values\n **/\n\nimport {\n  type,\n  removeWhiteSpace,\n  getNumbers,\n} from './util';\n\n\nconst reportData = {\n  page: '',\n  status: '',\n  numbers: [],\n};\n\nexport default function techies(dom) {\n  if (type(dom) !== 'htmlbodyelement') {\n    console.warn(`[techies] error dom type: ${type(dom)}, need body element, techies will exit doing nothing.`);\n    return;\n  }\n\n  traverse(dom);\n\n  reportData.numbers = removeWhiteSpace(reportData.numbers);\n  let newArr = [];\n  reportData.numbers.forEach((item, index) => {\n    const arr = getNumbers(item);\n    if (arr) {\n      newArr = newArr.concat(arr);\n    }\n  });\n  reportData.numbers = newArr;\n  console.info('reportData: ', reportData);\n}\n\nfunction traverse(parent) {\n  // get node textContent\n  getNodeTextContent(parent);\n  const children = parent.children;\n  let l = children.length;\n\n  let child;\n  while (l > 0) {\n    child = children[l - 1];\n    traverse(child);\n    l--;\n  }\n}\n\n// get current node `textContent`\nfunction getNodeTextContent(node) {\n  const innerHTML = node.innerHTML.trim().replace(/\\s/g, '');\n  if (node.children.length) {\n    const children = Array.from(node.children);\n    const reg = new RegExp(children.map(child => child.outerHTML.trim().replace(/\\s/g, '')).join('|'));\n\n    const textContent = innerHTML.split(reg);\n    reportData.numbers = reportData.numbers.concat(textContent);\n  } else {\n    reportData.numbers.push(node.textContent);\n  }\n}\n","'use strict';\n/**\n * @author: tianding.wk\n * @createdTime: 2019-02-11 20:56:19\n * @fileName: index.js\n * @description: entry file\n **/\n\n// module.exports = exports = require('./src/dom.js');\nimport traverse from './src/dom';\n\ntraverse(document.body);\n"]}